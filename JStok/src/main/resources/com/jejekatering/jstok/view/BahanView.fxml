<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<StackPane fx:id="rootStack" styleClass="root"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.jejekatering.jstok.controller.BahanController"
           stylesheets="@../css/style.css"
           prefHeight="850.0" prefWidth="1300.0">

    <HBox spacing="20" style="-fx-padding: 20;">

        <VBox styleClass="sidebar-card" prefWidth="280" spacing="12">
            <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 0 0 30 10;">
                <StackPane style="-fx-background-color: linear-gradient(to bottom right, #8B5CF6, #7C3AED); -fx-background-radius: 14; -fx-padding: 10; -fx-effect: dropshadow(three-pass-box, rgba(139,92,246,0.3), 10, 0, 0, 5);">
                    <FontIcon iconLiteral="fth-package" iconSize="22" iconColor="white"/>
                </StackPane>
                <VBox>
                    <Label text="J Stok" styleClass="brand-title" style="-fx-font-size: 20px;"/>
                    <Label text="Pro Admin" styleClass="brand-subtitle"/>
                </VBox>
            </HBox>

            <Label text="MENU UTAMA" styleClass="nav-section-label"/>

            <Button fx:id="btnDashboard" text="Dashboard" onAction="#onMenuDashboardClick" styleClass="nav-button" maxWidth="Infinity">
                <graphic> <FontIcon iconLiteral="fth-grid"/> </graphic>
            </Button>
            <Button fx:id="btnBahan" text="Data Bahan" onAction="#onMenuBahanClick" styleClass="nav-button" maxWidth="Infinity">
                <graphic> <FontIcon iconLiteral="fth-database"/> </graphic>
            </Button>
            <Button fx:id="btnStokMasuk" text="Stok Masuk" onAction="#onMenuStokMasukClick" styleClass="nav-button" maxWidth="Infinity">
                <graphic> <FontIcon iconLiteral="fth-download"/> </graphic>
            </Button>
            <Button fx:id="btnStokKeluar" text="Stok Keluar" onAction="#onMenuStokKeluarClick" styleClass="nav-button" maxWidth="Infinity">
                <graphic> <FontIcon iconLiteral="fth-upload"/> </graphic>
            </Button>
            <Button fx:id="btnLaporan" text="Laporan" onAction="#onMenuLaporanClick" styleClass="nav-button" maxWidth="Infinity">
                <graphic> <FontIcon iconLiteral="fth-file-text"/> </graphic>
            </Button>

            <Region VBox.vgrow="ALWAYS"/>
            <Button text="Logout" onAction="#onLogoutClick" styleClass="nav-button" maxWidth="Infinity" style="-fx-text-fill: #FF3B30;">
                <graphic> <FontIcon iconLiteral="fth-log-out" iconColor="#FF3B30"/> </graphic>
            </Button>
        </VBox>

        <BorderPane HBox.hgrow="ALWAYS" fx:id="mainBorderPane">

            <top>
                <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 10 10 30 10;">
                    <VBox>
                        <Label text="Data Bahan" styleClass="page-title"/>
                        <Label text="Kelola master data barang inventaris." styleClass="text-secondary"/>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS"/>
                    <TextField fx:id="txtSearch" promptText="Cari nama bahan..." styleClass="search-input" prefWidth="280"/>
                    <Button onAction="#onToggleTheme" styleClass="theme-toggle">
                        <graphic> <FontIcon iconLiteral="fth-moon" iconSize="18" iconColor="#86868B"/> </graphic>
                    </Button>
                </HBox>
            </top>

            <center>
                <VBox styleClass="spatial-card" style="-fx-padding: 0;">
                    <TableView fx:id="tableBahan" styleClass="modern-table" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colId" text="ID" prefWidth="50"/>
                            <TableColumn fx:id="colNama" text="Nama Bahan" prefWidth="250"/>
                            <TableColumn fx:id="colSatuan" text="Satuan" prefWidth="100"/>
                            <TableColumn fx:id="colStok" text="Stok Fisik" prefWidth="100"/>
                            <TableColumn fx:id="colMinStok" text="Min. Stok" prefWidth="100"/>
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </center>

            <right>
                <VBox prefWidth="320" spacing="20" style="-fx-padding: 0 0 0 20;">
                    <VBox styleClass="spatial-card" spacing="20" VBox.vgrow="ALWAYS">
                        <Label text="Detail Bahan" styleClass="section-title"/>

                        <VBox spacing="8">
                            <Label text="Nama Bahan" styleClass="form-label"/>
                            <TextField fx:id="txtNama" promptText="Contoh: Beras Premium" styleClass="form-input"/>
                        </VBox>

                        <VBox spacing="8">
                            <Label text="Satuan" styleClass="form-label"/>
                            <TextField fx:id="txtSatuan" promptText="Contoh: Kg, Liter, Pcs" styleClass="form-input"/>
                        </VBox>

                        <GridPane hgap="10" vgap="10">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="50"/>
                                <ColumnConstraints percentWidth="50"/>
                            </columnConstraints>

                            <VBox spacing="8" GridPane.columnIndex="0">
                                <Label text="Stok Awal" styleClass="form-label"/>
                                <TextField fx:id="txtStok" promptText="0" styleClass="form-input"/>
                            </VBox>

                            <VBox spacing="8" GridPane.columnIndex="1">
                                <Label text="Min. Stok" styleClass="form-label"/>
                                <TextField fx:id="txtMinStok" promptText="10" styleClass="form-input"/>
                            </VBox>
                        </GridPane>

                        <Region VBox.vgrow="ALWAYS"/>

                        <VBox spacing="10">
                            <Button fx:id="btnSimpan" text="Simpan Data" onAction="#onSimpanClick" styleClass="button-primary" maxWidth="Infinity"/>

                            <HBox spacing="10">
                                <Button fx:id="btnReset" text="Reset" onAction="#onResetClick" styleClass="button-secondary" maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
                                <Button fx:id="btnHapus" text="Hapus" onAction="#onHapusClick" styleClass="button-danger" maxWidth="Infinity" HBox.hgrow="ALWAYS" disable="true"/>
                            </HBox>
                        </VBox>
                    </VBox>
                </VBox>
            </right>

        </BorderPane>
    </HBox>
</StackPane>