<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import org.kordamp.ikonli.javafx.FontIcon?>
<?import eu.hansolo.tilesfx.Tile?>

<StackPane fx:id="rootStack" styleClass="root"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.jejekatering.jstok.controller.DashboardController"
           prefHeight="850.0" prefWidth="1300.0">

    <Region styleClass="background-layer"/>

    <HBox style="-fx-padding: 30;" spacing="30">

        <VBox styleClass="glass-sidebar" prefWidth="280" spacing="10">
            <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 0 0 30 10;">
                <StackPane style="-fx-background-color: #4361EE; -fx-background-radius: 12; -fx-padding: 10;">
                    <FontIcon iconLiteral="fth-package" iconSize="24" style="-fx-icon-color: white;"/>
                </StackPane>
                <VBox>
                    <Label text="J Stok" style="-fx-font-size: 22px; -fx-font-weight: 900; -fx-text-fill: -text-primary;"/>
                    <Label text="Manager Pro" styleClass="subtitle" style="-fx-font-size: 12px;"/>
                </VBox>
            </HBox>

            <Label text="UTAMA" styleClass="caption" style="-fx-padding: 10 0 5 15;"/>

            <Button text="Dashboard" onAction="#onMenuDashboardClick" styleClass="nav-item" maxWidth="Infinity">
                <graphic> <FontIcon iconLiteral="fth-grid"/> </graphic>
            </Button>

            <Button text="Data Bahan" onAction="#onMenuBahanClick" styleClass="nav-item" maxWidth="Infinity">
                <graphic> <FontIcon iconLiteral="fth-database"/> </graphic>
            </Button>

            <Button text="Stok Masuk" onAction="#onMenuStokMasukClick" styleClass="nav-item" maxWidth="Infinity">
                <graphic> <FontIcon iconLiteral="fth-download"/> </graphic>
            </Button>

            <Button text="Stok Keluar" onAction="#onMenuStokKeluarClick" styleClass="nav-item" maxWidth="Infinity">
                <graphic> <FontIcon iconLiteral="fth-upload"/> </graphic>
            </Button>

            <Button text="Laporan" onAction="#onMenuLaporanClick" styleClass="nav-item" maxWidth="Infinity">
                <graphic> <FontIcon iconLiteral="fth-file-text"/> </graphic>
            </Button>

            <Region VBox.vgrow="ALWAYS"/>

            <VBox styleClass="glass-card" spacing="15" style="-fx-padding: 15; -fx-background-color: rgba(255,255,255,0.2);">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <StackPane style="-fx-background-color: #4CC9F0; -fx-background-radius: 50; -fx-min-width: 35; -fx-min-height: 35;">
                        <Label text="AD" style="-fx-font-weight: bold; -fx-text-fill: white;"/>
                    </StackPane>
                    <VBox>
                        <Label text="Administrator" style="-fx-font-weight: 700; -fx-text-fill: -text-primary;"/>
                        <Label text="Online" style="-fx-text-fill: #4CC9F0; -fx-font-size: 11px; -fx-font-weight: bold;"/>
                    </VBox>
                </HBox>
                <Button text="Logout System" onAction="#onLogoutClick" styleClass="btn-danger" maxWidth="Infinity" prefHeight="40">
                    <graphic> <FontIcon iconLiteral="fth-log-out"/> </graphic>
                </Button>
            </VBox>
        </VBox>

        <BorderPane HBox.hgrow="ALWAYS" fx:id="mainBorderPane">

            <top>
                <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 10 0 35 0;">
                    <VBox>
                        <Label text="Dashboard Overview" styleClass="h1"/>
                        <Label text="Halo Admin, berikut ringkasan hari ini." styleClass="subtitle"/>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS"/>

                    <HBox alignment="CENTER_LEFT" styleClass="glass-input" spacing="10">
                        <FontIcon iconLiteral="fth-search" style="-fx-icon-color: -text-secondary;"/>
                        <TextField promptText="Cari data stok..." style="-fx-background-color: transparent; -fx-min-width: 250; -fx-font-size: 13px;"/>
                    </HBox>

                    <Button onAction="#onToggleTheme" styleClass="glass-card" text="" style="-fx-padding: 12; -fx-background-radius: 50;">
                        <graphic><FontIcon iconLiteral="fth-moon" iconSize="20" style="-fx-icon-color: -text-primary;"/></graphic>
                    </Button>
                </HBox>
            </top>

            <center>
                <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;">
                    <VBox spacing="30" style="-fx-padding: 0 15 0 0;">

                        <GridPane hgap="25" vgap="25" minHeight="200">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="30"/>
                                <ColumnConstraints percentWidth="23.3"/>
                                <ColumnConstraints percentWidth="23.3"/>
                                <ColumnConstraints percentWidth="23.3"/>
                            </columnConstraints>

                            <Tile fx:id="tileTotalStok" GridPane.columnIndex="0" />
                            <Tile fx:id="tileStokMasuk" GridPane.columnIndex="1" />
                            <Tile fx:id="tileStokKeluar" GridPane.columnIndex="2" />
                            <Tile fx:id="tileKritis" GridPane.columnIndex="3" />
                        </GridPane>

                        <GridPane hgap="25">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="70"/>
                                <ColumnConstraints percentWidth="30"/>
                            </columnConstraints>

                            <VBox styleClass="glass-card" GridPane.columnIndex="0" minHeight="450">
                                <HBox alignment="CENTER_LEFT" style="-fx-padding: 0 0 20 0;">
                                    <VBox>
                                        <Label text="Analitik Pergerakan" styleClass="h1" style="-fx-font-size: 18px;"/>
                                        <Label text="Statistik keluar masuk barang minggu ini" styleClass="subtitle"/>
                                    </VBox>
                                    <Region HBox.hgrow="ALWAYS"/>
                                    <Button text="Unduh Laporan" style="-fx-background-color: rgba(67, 97, 238, 0.1); -fx-text-fill: #4361EE; -fx-background-radius: 8; -fx-cursor: hand;"/>
                                </HBox>
                                <BarChart fx:id="barChart" legendVisible="false" verticalGridLinesVisible="false">
                                    <xAxis><CategoryAxis label="Hari"/></xAxis>
                                    <yAxis><NumberAxis label="Jumlah"/></yAxis>
                                </BarChart>
                            </VBox>

                            <VBox styleClass="glass-card" GridPane.columnIndex="1" minHeight="450" spacing="20">
                                <Label text="Aktivitas Terbaru" styleClass="h1" style="-fx-font-size: 16px;"/>

                                <VBox spacing="15">
                                    <HBox spacing="12" alignment="CENTER_LEFT">
                                        <StackPane style="-fx-background-color: rgba(76, 201, 240, 0.15); -fx-padding: 8; -fx-background-radius: 10;">
                                            <FontIcon iconLiteral="fth-plus" iconSize="16" style="-fx-icon-color: #4CC9F0;"/>
                                        </StackPane>
                                        <VBox>
                                            <Label text="Beras Premium" style="-fx-font-weight: bold; -fx-text-fill: -text-primary;"/>
                                            <Label text="Masuk: 50 Kg" styleClass="subtitle" style="-fx-font-size: 11px;"/>
                                        </VBox>
                                    </HBox>

                                    <HBox spacing="12" alignment="CENTER_LEFT">
                                        <StackPane style="-fx-background-color: rgba(247, 37, 133, 0.15); -fx-padding: 8; -fx-background-radius: 10;">
                                            <FontIcon iconLiteral="fth-minus" iconSize="16" style="-fx-icon-color: #F72585;"/>
                                        </StackPane>
                                        <VBox>
                                            <Label text="Minyak Goreng" style="-fx-font-weight: bold; -fx-text-fill: -text-primary;"/>
                                            <Label text="Keluar: 12 L" styleClass="subtitle" style="-fx-font-size: 11px;"/>
                                        </VBox>
                                    </HBox>

                                    <HBox spacing="12" alignment="CENTER_LEFT">
                                        <StackPane style="-fx-background-color: rgba(76, 201, 240, 0.15); -fx-padding: 8; -fx-background-radius: 10;">
                                            <FontIcon iconLiteral="fth-plus" iconSize="16" style="-fx-icon-color: #4CC9F0;"/>
                                        </StackPane>
                                        <VBox>
                                            <Label text="Tepung Terigu" style="-fx-font-weight: bold; -fx-text-fill: -text-primary;"/>
                                            <Label text="Masuk: 100 Kg" styleClass="subtitle" style="-fx-font-size: 11px;"/>
                                        </VBox>
                                    </HBox>
                                </VBox>
                            </VBox>
                        </GridPane>

                    </VBox>
                </ScrollPane>
            </center>
        </BorderPane>
    </HBox>
</StackPane>