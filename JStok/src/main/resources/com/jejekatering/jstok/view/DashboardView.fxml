<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import org.kordamp.ikonli.javafx.FontIcon?>
<?import eu.hansolo.tilesfx.Tile?>

<StackPane fx:id="rootStack" styleClass="root"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.jejekatering.jstok.controller.DashboardController"
           stylesheets="@../css/style.css"
           prefHeight="850.0" prefWidth="1300.0">

    <HBox spacing="24" style="-fx-padding: 24;">
        <VBox styleClass="sidebar-card" prefWidth="260" spacing="8">
            <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-padding: 8 12 24 12;">
                <StackPane styleClass="brand-icon-container">
                    <FontIcon iconLiteral="fth-package" iconSize="20" iconColor="white"/>
                </StackPane>
                <VBox spacing="2">
                    <Label text="J Stok" styleClass="brand-title"/>
                    <Label text="Inventory System" styleClass="brand-subtitle"/>
                </VBox>
            </HBox>

            <Label text="MENU" styleClass="nav-section-label"/>

            <Button fx:id="btnDashboard" text="Dashboard" onAction="#onMenuDashboardClick" styleClass="nav-button" maxWidth="Infinity">
                <graphic><FontIcon iconLiteral="fth-grid" iconSize="16"/></graphic>
            </Button>
            <Button fx:id="btnBahan" text="Data Bahan" onAction="#onMenuBahanClick" styleClass="nav-button" maxWidth="Infinity">
                <graphic><FontIcon iconLiteral="fth-database" iconSize="16"/></graphic>
            </Button>
            <Button fx:id="btnStokMasuk" text="Stok Masuk" onAction="#onMenuStokMasukClick" styleClass="nav-button" maxWidth="Infinity">
                <graphic><FontIcon iconLiteral="fth-download" iconSize="16"/></graphic>
            </Button>
            <Button fx:id="btnStokKeluar" text="Stok Keluar" onAction="#onMenuStokKeluarClick" styleClass="nav-button" maxWidth="Infinity">
                <graphic><FontIcon iconLiteral="fth-upload" iconSize="16"/></graphic>
            </Button>
            <Button fx:id="btnLaporan" text="Laporan" onAction="#onMenuLaporanClick" styleClass="nav-button" maxWidth="Infinity">
                <graphic><FontIcon iconLiteral="fth-file-text" iconSize="16"/></graphic>
            </Button>

            <Region VBox.vgrow="ALWAYS"/>

            <StackPane styleClass="theme-toggle-sidebar" onMouseClicked="#onToggleTheme">
                <HBox alignment="CENTER" spacing="10">
                    <FontIcon fx:id="themeToggleIcon" iconLiteral="fth-moon" iconSize="16"/>
                    <Label fx:id="themeLabel" text="Dark Mode" styleClass="theme-label"/>
                </HBox>
            </StackPane>

            <Button text="Keluar" onAction="#onLogoutClick" styleClass="nav-button-logout" maxWidth="Infinity">
                <graphic><FontIcon iconLiteral="fth-log-out" iconSize="16" iconColor="#FF3B30"/></graphic>
            </Button>
        </VBox>

        <BorderPane HBox.hgrow="ALWAYS" fx:id="mainBorderPane">
            <center>
                <ScrollPane fx:id="dashboardContent" fitToWidth="true" fitToHeight="true" styleClass="content-scroll" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
                    <VBox spacing="24" style="-fx-padding: 8 8 24 8;">
                        <HBox alignment="CENTER_LEFT">
                            <VBox spacing="4">
                                <Label text="Dashboard" styleClass="page-title"/>
                                <Label text="Overview performa inventaris Anda" styleClass="text-secondary"/>
                            </VBox>
                        </HBox>

                        <GridPane hgap="20" vgap="20">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                            </columnConstraints>
                            <StackPane fx:id="card1" styleClass="tile-container" GridPane.columnIndex="0">
                                <Tile fx:id="tileTotalStok"/>
                            </StackPane>
                            <StackPane fx:id="card2" styleClass="tile-container" GridPane.columnIndex="1">
                                <Tile fx:id="tileStokMasuk"/>
                            </StackPane>
                            <StackPane fx:id="card3" styleClass="tile-container" GridPane.columnIndex="2">
                                <Tile fx:id="tileStokKeluar"/>
                            </StackPane>
                            <StackPane fx:id="card4" styleClass="tile-container" GridPane.columnIndex="3">
                                <Tile fx:id="tileKritis"/>
                            </StackPane>
                        </GridPane>

                        <GridPane hgap="20" VBox.vgrow="ALWAYS">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="65"/>
                                <ColumnConstraints percentWidth="35"/>
                            </columnConstraints>

                            <VBox fx:id="chartSection" styleClass="spatial-card" GridPane.columnIndex="0" spacing="16">
                                <Label text="Analitik Stok" styleClass="section-title"/>
                                <BarChart fx:id="barChart" legendVisible="false" verticalGridLinesVisible="false" VBox.vgrow="ALWAYS" minHeight="380">
                                    <xAxis><CategoryAxis/></xAxis>
                                    <yAxis><NumberAxis/></yAxis>
                                </BarChart>
                            </VBox>

                            <VBox fx:id="activitySection" styleClass="spatial-card" GridPane.columnIndex="1" spacing="16">
                                <Label text="Aktivitas Terbaru" styleClass="section-title"/>
                                <VBox spacing="12" VBox.vgrow="ALWAYS">
                                    <HBox spacing="12" alignment="CENTER_LEFT" styleClass="activity-item">
                                        <StackPane styleClass="activity-icon-success">
                                            <FontIcon iconLiteral="fth-arrow-down" iconSize="14" iconColor="#34C759"/>
                                        </StackPane>
                                        <VBox spacing="2" HBox.hgrow="ALWAYS">
                                            <Label text="Beras Premium" styleClass="activity-title"/>
                                            <Label text="Masuk: 50 Kg" styleClass="activity-subtitle"/>
                                        </VBox>
                                        <Label text="2m" styleClass="activity-time"/>
                                    </HBox>
                                    <HBox spacing="12" alignment="CENTER_LEFT" styleClass="activity-item">
                                        <StackPane styleClass="activity-icon-danger">
                                            <FontIcon iconLiteral="fth-arrow-up" iconSize="14" iconColor="#FF3B30"/>
                                        </StackPane>
                                        <VBox spacing="2" HBox.hgrow="ALWAYS">
                                            <Label text="Minyak Goreng" styleClass="activity-title"/>
                                            <Label text="Keluar: 10 Liter" styleClass="activity-subtitle"/>
                                        </VBox>
                                        <Label text="15m" styleClass="activity-time"/>
                                    </HBox>
                                    <HBox spacing="12" alignment="CENTER_LEFT" styleClass="activity-item">
                                        <StackPane styleClass="activity-icon-success">
                                            <FontIcon iconLiteral="fth-arrow-down" iconSize="14" iconColor="#34C759"/>
                                        </StackPane>
                                        <VBox spacing="2" HBox.hgrow="ALWAYS">
                                            <Label text="Tepung Terigu" styleClass="activity-title"/>
                                            <Label text="Masuk: 25 Kg" styleClass="activity-subtitle"/>
                                        </VBox>
                                        <Label text="1h" styleClass="activity-time"/>
                                    </HBox>
                                </VBox>
                            </VBox>
                        </GridPane>
                    </VBox>
                </ScrollPane>
            </center>
        </BorderPane>
    </HBox>
</StackPane>