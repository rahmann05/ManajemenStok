<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import org.kordamp.ikonli.javafx.FontIcon?>
<?import eu.hansolo.tilesfx.Tile?>

<StackPane fx:id="rootStack" styleClass="root"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.jejekatering.jstok.controller.DashboardController"
           stylesheets="@../css/style.css"
           prefHeight="850.0" prefWidth="1300.0">

    <HBox spacing="20" style="-fx-padding: 20;"> <VBox styleClass="sidebar-card" prefWidth="280" spacing="12">
        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 0 0 30 10;">
            <StackPane style="-fx-background-color: linear-gradient(to bottom right, #8B5CF6, #7C3AED); -fx-background-radius: 14; -fx-padding: 10; -fx-effect: dropshadow(three-pass-box, rgba(139,92,246,0.3), 10, 0, 0, 5);">
                <FontIcon iconLiteral="fth-package" iconSize="22" iconColor="white"/>
            </StackPane>
            <VBox>
                <Label text="J Stok" styleClass="brand-title"/>
                <Label text="Pro Admin" styleClass="brand-subtitle"/>
            </VBox>
        </HBox>

        <Label text="MENU UTAMA" styleClass="nav-section-label"/>

        <Button fx:id="btnDashboard" text="Dashboard" onAction="#onMenuDashboardClick" styleClass="nav-button" maxWidth="Infinity">
            <graphic> <FontIcon iconLiteral="fth-grid"/> </graphic>
        </Button>
        <Button fx:id="btnBahan" text="Data Bahan" onAction="#onMenuBahanClick" styleClass="nav-button" maxWidth="Infinity">
            <graphic> <FontIcon iconLiteral="fth-database"/> </graphic>
        </Button>
        <Button fx:id="btnStokMasuk" text="Stok Masuk" onAction="#onMenuStokMasukClick" styleClass="nav-button" maxWidth="Infinity">
            <graphic> <FontIcon iconLiteral="fth-download"/> </graphic>
        </Button>
        <Button fx:id="btnStokKeluar" text="Stok Keluar" onAction="#onMenuStokKeluarClick" styleClass="nav-button" maxWidth="Infinity">
            <graphic> <FontIcon iconLiteral="fth-upload"/> </graphic>
        </Button>
        <Button fx:id="btnLaporan" text="Laporan" onAction="#onMenuLaporanClick" styleClass="nav-button" maxWidth="Infinity">
            <graphic> <FontIcon iconLiteral="fth-file-text"/> </graphic>
        </Button>

        <Region VBox.vgrow="ALWAYS"/>
        <Button text="Logout" onAction="#onLogoutClick" styleClass="nav-button" maxWidth="Infinity" style="-fx-text-fill: #FF3B30;">
            <graphic> <FontIcon iconLiteral="fth-log-out" iconColor="#FF3B30"/> </graphic>
        </Button>
    </VBox>

        <BorderPane HBox.hgrow="ALWAYS" fx:id="mainBorderPane" style="-fx-padding: 10;">
            <top>
                <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 0 0 35 0;">
                    <VBox>
                        <Label text="Dashboard" styleClass="page-title"/>
                        <Label text="Overview performa inventaris Anda." styleClass="text-secondary"/>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS"/>
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <TextField promptText="Cari data..." styleClass="search-input" prefWidth="280"/>
                        <StackPane styleClass="theme-toggle" onMouseClicked="#onToggleTheme">
                            <FontIcon fx:id="themeToggleIcon" iconLiteral="fth-moon" iconSize="18"/>
                        </StackPane>
                    </HBox>
                </HBox>
            </top>

            <center>
                <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;" vbarPolicy="NEVER">
                    <VBox spacing="30">
                        <GridPane hgap="25" vgap="25">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                            </columnConstraints>
                            <StackPane fx:id="card1" GridPane.columnIndex="0"> <Tile fx:id="tileTotalStok" /> </StackPane>
                            <StackPane fx:id="card2" GridPane.columnIndex="1"> <Tile fx:id="tileStokMasuk" /> </StackPane>
                            <StackPane fx:id="card3" GridPane.columnIndex="2"> <Tile fx:id="tileStokKeluar" /> </StackPane>
                            <StackPane fx:id="card4" GridPane.columnIndex="3"> <Tile fx:id="tileKritis" /> </StackPane>
                        </GridPane>

                        <GridPane hgap="25">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="70"/>
                                <ColumnConstraints percentWidth="30"/>
                            </columnConstraints>
                            <VBox fx:id="chartSection" styleClass="spatial-card" GridPane.columnIndex="0" minHeight="450">
                                <HBox alignment="CENTER_LEFT" style="-fx-padding: 0 0 25 0;">
                                    <Label text="Analitik Stok" styleClass="section-title"/>
                                </HBox>
                                <BarChart fx:id="barChart" legendVisible="false" verticalGridLinesVisible="false" VBox.vgrow="ALWAYS">
                                    <xAxis><CategoryAxis label="Hari"/></xAxis>
                                    <yAxis><NumberAxis label="Jumlah"/></yAxis>
                                </BarChart>
                            </VBox>

                            <VBox fx:id="activitySection" styleClass="spatial-card" GridPane.columnIndex="1" minHeight="450" spacing="25">
                                <Label text="Aktivitas Terbaru" styleClass="section-title"/>
                                <VBox spacing="20">
                                    <HBox spacing="15" alignment="CENTER_LEFT">
                                        <StackPane style="-fx-background-color: rgba(52, 199, 89, 0.1); -fx-padding: 12; -fx-background-radius: 14;">
                                            <FontIcon iconLiteral="fth-arrow-down" iconSize="16" iconColor="#34C759"/>
                                        </StackPane>
                                        <VBox>
                                            <Label text="Beras Premium" styleClass="text-primary" style="-fx-font-weight: 700;"/>
                                            <Label text="Masuk: 50 Kg" styleClass="text-secondary" style="-fx-font-size: 12px;"/>
                                        </VBox>
                                    </HBox>
                                </VBox>
                            </VBox>
                        </GridPane>
                    </VBox>
                </ScrollPane>
            </center>
        </BorderPane>
    </HBox>
</StackPane>